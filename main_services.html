<!DOCTYPE html>  
<html lang="ar" dir="rtl">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³Ø§Ø¦Ø­ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</title>  
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>  
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>  
    <script src="data_config.js"></script>  
    <style>  
        body {  
            background-color: #1e1e2f;  
            color: #fff;  
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;  
            margin: 0;  
            padding: 0;  
        }  
        .container {  
            max-width: 1200px;  
            margin: auto;  
            padding: 20px;  
        }  
        h1 {  
            text-align: center;  
            margin-bottom: 20px;  
        }  
        .services-grid {  
            display: grid;  
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));   
            gap: 20px;  
            margin-top: 30px;  
        }  
        .service-card {  
            background-color: #2a2a3f;  
            padding: 20px;  
            border-radius: 8px;  
            text-align: center;  
            border: 1px solid #555;  
            cursor: pointer;  
            transition: background-color 0.3s, border-color 0.3s;  
            text-decoration: none;  
            color: #fff;  
            font-weight: bold;  
        }  
        .service-card:hover {  
            background-color: #3b3b5c;  
            border-color: gold;  
        }  
        .service-card span {  
            display: block;  
            font-size: 2em;  
            margin-bottom: 10px;  
        }  
        .service-card.chat-card {  
            border-color: #4169e1;  
            background-color: #333d52;  
        }  
        .btn-emergency {  
            position: fixed;  
            bottom: 20px;  
            left: 20px;  
            font-size: 2em;  
            padding: 10px 15px;  
            background-color: #ff4d4d;  
            color: #fff;  
            border: none;  
            border-radius: 50%;  
            cursor: pointer;  
            z-index: 1000;  
        }  
        .header-controls {  
            display: flex;  
            justify-content: center;  
            gap: 15px;  
            margin-bottom: 20px;  
            flex-wrap: wrap;  
        }  
        .btn-back, .btn-primary {  
            padding: 10px 15px;  
            border: none;  
            border-radius: 6px;  
            cursor: pointer;  
            font-weight: bold;  
        }  
        .btn-back {  
            background-color: #555;  
            color: #fff;  
        }  
        .btn-primary {  
            background-color: #4169e1;  
            color: #fff;  
        }  
        .modal {  
            position: fixed;  
            z-index: 2000;  
            left: 0;  
            top: 0;  
            width: 100%;  
            height: 100%;  
            overflow: auto;  
            background-color: rgba(0,0,0,0.7);  
            display: flex;  
            justify-content: center;  
            align-items: center;  
        }  
        .modal-content {  
            background-color: #2a2a3f;  
            padding: 20px;  
            border-radius: 8px;  
            width: 90%;  
            max-width: 500px;  
        }  
        .close-btn {  
            float: left;  
            font-size: 1.5em;  
            font-weight: bold;  
            cursor: pointer;  
            color: #fff;  
        }  
        .form-group {  
            margin-bottom: 15px;  
        }  
        .form-group label {  
            display: block;  
            margin-bottom: 5px;  
        }  
        .form-group input, .form-group select, .form-group textarea {  
            width: 100%;  
            padding: 8px 10px;  
            border-radius: 4px;  
            border: 1px solid #555;  
            background-color: #1e1e2f;  
            color: #fff;  
        }  
    </style>  
</head>  
<body>  
    <button onclick="handleEmergency()" class="btn-emergency">ğŸš¨</button>  
      
    <div class="header-controls">  
        <button onclick="logoutTourist()" class="btn-back" style="background-color: #ff4d4d;">ğŸšª Ø®Ø±ÙˆØ¬</button>  
        <button onclick="openComplaintModal()" class="btn-back" style="background-color: #4169e1;">ğŸ“ Ø´ÙƒÙˆÙ‰ / Ø§Ù‚ØªØ±Ø§Ø­</button>  
    </div>  
  
    <div class="container">  
        <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª! ğŸ‘‹</h1>  
          
        <div class="services-grid">  
            <a href="https://alisedafnan-maker.github.io/mywebapp/turesm.html" class="service-card">  
                <span>ğŸ—ºï¸</span> Ø§Ù„Ù…Ø¹Ø§Ù„Ù… Ø§Ù„Ø³ÙŠØ§Ø­ÙŠØ©  
            </a>  
            <a href="assistants_cards.html?role=GUIDE" class="service-card">  
                <span>ğŸ‘¤</span> Ø§Ù„Ù…Ø±Ø´Ø¯ÙŠÙ† Ø§Ù„Ø³ÙŠØ§Ø­ÙŠÙŠÙ†  
            </a>  
            <a href="assistants_cards.html?role=COMPANION" class="service-card">  
                <span>â™¿</span> Ù…Ø±Ø§ÙÙ‚Ùˆ Ø°ÙˆÙŠ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø®Ø§ØµØ©  
            </a>  
            <a href="assistants_cards.html?role=DRIVER" class="service-card">  
                <span>ğŸš—</span> Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªÙ†Ù‚Ù„ (Ø³Ø§Ø¦Ù‚ÙŠÙ†)  
            </a>  
            <a href="hotels.html" class="service-card">  
                <span>ğŸ¨</span> Ø§Ù„ÙÙ†Ø§Ø¯Ù‚ Ø§Ù„Ù‚Ø±ÙŠØ¨Ø©  
            </a>  
            <a href="restaurants.html" class="service-card">  
                <span>ğŸ´</span> Ø§Ù„Ù…Ø·Ø§Ø¹Ù…  
            </a>  
            <a href="stores.html" class="service-card">  
                <span>ğŸ›ï¸</span> Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©  
            </a>  
            <a href="gemini_chat_bot.html" class="service-card chat-card">  
                <span>ğŸ¤–</span> **Ø§Ù„Ø´Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø­ÙŠ**  
            </a>     
        </div>  
    </div>  
      
    <div id="complaintModal" class="modal" style="display: none;">  
        <div class="modal-content">  
            <span class="close-btn" onclick="closeModal('complaintModal')">Ã—</span>  
            <h2>ğŸ“ Ø´ÙƒÙˆÙ‰ Ø£Ùˆ Ø§Ù‚ØªØ±Ø§Ø­</h2>  
            <form id="complaintForm">  
                <div class="form-group">  
                    <label for="complaintName">Ø§Ù„Ø§Ø³Ù…:</label>  
                    <input type="text" id="complaintName" required>  
                </div>  
                 <div class="form-group">  
                    <label for="complaintPhone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>  
                    <input type="tel" id="complaintPhone" required>  
                </div>  
                <div class="form-group">  
                    <label for="complaintType">Ù†ÙˆØ¹ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:</label>  
                    <select id="complaintType" required>  
                        <option value="">-- Ø§Ø®ØªØ± --</option>  
                        <option value="Ø´ÙƒÙˆÙ‰">Ø´ÙƒÙˆÙ‰</option>  
                        <option value="Ø§Ù‚ØªØ±Ø§Ø­">Ø§Ù‚ØªØ±Ø§Ø­</option>  
                    </select>  
                </div>  
                <div class="form-group">  
                    <label for="complaintMessage">Ø§Ù„ØªÙØ§ØµÙŠÙ„:</label>  
                    <textarea id="complaintMessage" rows="4" required></textarea>  
                </div>  
                <button type="submit" class="btn-primary">ğŸ’¾ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>  
                <p id="complaintMessageResult" style="margin-top: 10px;"></p>  
            </form>  
        </div>  
    </div>

    <div id="emergencyModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('emergencyModal')">Ã—</span>
            <h2>ğŸš¨ Ø¨Ù„Ø§Øº Ø·Ø§Ø±Ø¦</h2>
            <form id="emergencyForm">
                <div class="form-group">
                    <label>Ø§Ù„Ø§Ø³Ù…:</label>
                    <input type="text" id="emgName" required>
                </div>
                <div class="form-group">
                    <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
                    <input type="tel" id="emgPhone" required>
                </div>
                <button type="submit" class="btn-primary">ğŸ“¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ù„Ø§Øº</button>
                <p id="emgResult" style="margin-top:10px;"></p>
            </form>
        </div>
    </div>
  
    <script>  
        // --- ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„ØªØ°ÙƒØ±Ø© ---
        const ticket = sessionStorage.getItem('currentTicket');
        if(!ticket){
            alert("âš ï¸ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙˆØ¯ Ø§Ù„ØªØ°ÙƒØ±Ø©.");
            window.location.href = 'login.html';
        }

        const firebaseConfig = {  
          apiKey: "AIzaSyDpVqFWJfB4rA2-NA4QIl1w07e2LFQaYic",  
          authDomain: "tourguideapp-313c1.firebaseapp.com",  
          databaseURL: "https://tourguideapp-313c1-default-rtdb.firebaseio.com",  
          projectId: "tourguideapp-313c1",  
          storageBucket: "tourguideapp-313c1.firebasestorage.app",  
          messagingSenderId: "1036127588385",  
          appId: "1:1036127588385:web:d144dba8f70fe094395360"  
        };  
        firebase.initializeApp(firebaseConfig);  
        const db = firebase.database();  

        const saveEmergencyLog = (location) => {  
            const ticket = sessionStorage.getItem('currentTicket') || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';  
            const logId = Date.now().toString();  
            const logData = {  
                id: logId,  
                time: new Date().toLocaleString('ar-EG', { timeZone: 'Africa/Cairo' }),  
                location: location,  
                status: 'Ø¬Ø¯ÙŠØ¯',  
                ticketCode: ticket  
            };  
            db.ref('emergencies/' + logId).set(logData)  
              .then(() => console.log('âœ… Ø¨Ù„Ø§Øº Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ØªÙ… Ø­ÙØ¸Ù‡ ÙÙŠ Firebase'))  
              .catch(err => console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦:', err));  
        };  

        function closeModal(id) { document.getElementById(id).style.display = 'none'; }  
        function openComplaintModal() {  
            document.getElementById('complaintModal').style.display = 'block';  
            document.getElementById('complaintForm').reset();  
            document.getElementById('complaintMessageResult').textContent = '';  
        }  
        function scrollToBottom() { window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }); }  
        function handleEmergency() { document.getElementById('emergencyModal').style.display = 'flex'; }

        function logoutTourist() {  
            sessionStorage.removeItem('currentTicket');  
            window.location.href = 'login.html';  
        }  

        // ... Ø¨Ø§Ù‚ÙŠ ÙƒÙˆØ¯ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª ÙˆØ§Ù„Ø´ÙƒØ§ÙˆÙ‰ ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©
    </script>  
</body>  
</html>
